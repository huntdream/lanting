(this.webpackJsonplanting=this.webpackJsonplanting||[]).push([[0],{122:function(e,t,n){e.exports=n.p+"static/media/bg.f0ef5918.jpg"},127:function(e,t,n){e.exports=n(270)},157:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(52),r=n.n(c),o=n(26),i=(n(157),n(273)),s=new(n(126).a)({uri:"http://localhost:4000"}),u=function(e){var t=e.children;return l.a.createElement(i.a,{client:s},t)},m=n(20),d=n(40),g=n(9),f=n(121),h=(n(161),n(162),function(){return l.a.createElement("article",{className:"lanting-post"},l.a.createElement("header",{className:"lanting-post-header"},l.a.createElement("h3",{className:"lanting-post-title"},"\u5170\u4ead\u96c6\u5e8f")),l.a.createElement("main",{className:"lanting-post-content"},"\u4ef0\u89c2\u5b87\u5b99\u4e4b\u5927\uff0c\u4fef\u5bdf\u54c1\u7c7b\u4e4b\u76db"),l.a.createElement("footer",{className:"lanting-post-footer"},"2020\u5e7407\u670808\u65e515:58:23"))}),b=function(){return l.a.createElement("div",{className:"index"},Object(f.range)(10).map((function(e){return l.a.createElement(h,{key:e})})))},y=(n(163),n(8)),v=n.n(y),E=n(32),p=n.n(E),k=(n(258),n(27)),S=n.n(k),C=(n(51),function(e){var t=e.active,n=e.className,a=e.label,c=e.onToggle;return l.a.createElement("div",{onMouseDown:function(e){e.preventDefault(),c()},className:S()("stylecontrols-button",{"stylecontrols-button--active":t},n)},a)}),j=n(55),O=(n(259),function(e){var t=e.className,n=e.children,a=e.style,c=e.onClick,r=Object(j.a)(e,["className","children","style","onClick"]);return l.a.createElement("i",Object.assign({className:S()("material-icons",c?"lanting-icon--clickable":void 0,t),onClick:c,style:a},r),n)}),N=n(122),T=n.n(N),x=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:l.a.createElement(O,null,"format_quote"),style:"blockquote"},{label:l.a.createElement(O,null,"format_list_bulleted"),style:"unordered-list-item"},{label:l.a.createElement(O,null,"format_list_numbered"),style:"ordered-list-item"},{label:l.a.createElement(O,null,"code"),style:"code-block"},{label:l.a.createElement(O,null,"image"),style:"image"}],R=function(e){var t=e.editorState,n=e.onChange,a=t.getSelection(),c=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType(),r=function(){var e=t.getSelection(),a=t.getCurrentContent().createEntity("PHOTO","MUTABLE",{src:T.a}),l=a.getLastCreatedEntityKey(),c=y.Modifier.applyEntity(a,e,l),r=y.EditorState.push(t,c,"apply-entity");n(y.AtomicBlockUtils.insertAtomicBlock(r,l," "))};return l.a.createElement(l.a.Fragment,null,x.map((function(e){var a=e.label,o=e.style;return l.a.createElement(C,{active:o===c,className:"stylecontrols-".concat(o.toLowerCase()),key:o,label:a,onToggle:function(){return function(e){"image"===e?r():n(y.RichUtils.toggleBlockType(t,e))}(o)}})})))},B=[{label:l.a.createElement(O,null,"format_bold"),style:"BOLD"},{label:l.a.createElement(O,null,"format_italic"),style:"ITALIC"},{label:l.a.createElement(O,null,"format_underline"),style:"UNDERLINE"},{label:l.a.createElement(O,null,"format_strikethrough"),style:"STRIKETHROUGH"}],L=function(e){var t=e.editorState,n=e.onChange,a=t.getCurrentInlineStyle();return l.a.createElement(l.a.Fragment,null,B.map((function(e){var c=e.label,r=e.style;return l.a.createElement(C,{active:a.has(r),key:r,label:c,onToggle:function(){return e=r,void n(y.RichUtils.toggleInlineStyle(t,e));var e}})})))},w=function(e){var t=e.editorState,n=e.onChange;return l.a.createElement("div",{className:"stylecontrols"},l.a.createElement(L,{editorState:t,onChange:n}),l.a.createElement(R,{editorState:t,onChange:n}))},I=n(123),M=n(124),F=n(4),K=n.n(F);var D=new(function(){function e(){Object(I.a)(this,e),this.highlighted={}}return Object(M.a)(e,[{key:"getDecorations",value:function(e,t){var n,a,l=this,c=0,r=0,o=e.getType(),i=e.getText(),s=e.getKey(),u=Array(i.length).fill(null);if(!["code-block"].includes(o))return K.a.List(u);var m=null===(n=document.querySelector("code[data-offset-key*='".concat(s,"']")))||void 0===n||null===(a=n.closest("pre[class*=language-]"))||void 0===a?void 0:a.className,d=m?/(?<=language-)\w+$/.exec(m):["javascript"],g=p.a.tokenize(i,function(e){return e&&p.a.languages[e]?p.a.languages[e]:p.a.languages.javascript}(d?d[0]:""));this.highlighted[s]={};for(var f=function e(t,n,a){if("string"!==typeof n){var c="tk"+r++,o=s+"-"+c;l.highlighted[s][c]=n,function(e,t,n,a){for(var l=t;l<n;l++)e[l]=a}(t,a,a+n.length,o);for(var i=a,u=0;u<n.content.length;u++){var m=n.content[u];e(t,m,i),i+=m.length}}},h=0;h<g.length;h++){var b=g[h];f(u,b,c),c+=b.length}return K.a.List(u)}},{key:"getComponentForKey",value:function(e){return function(e){return l.a.createElement("span",{className:"token ".concat(e.type)},e.children)}}},{key:"getPropsForKey",value:function(e){var t=e.split("-"),n=Object(m.a)(t,2),a=n[0],l=n[1];return{type:this.highlighted[a][l].type}}}]),e}()),_=(n(260),[{label:"Javascript",syntax:"javascript"},{label:"CSS",syntax:"css"},{label:"HTML",syntax:"html"},{label:"Golang",syntax:"golang"},{label:"C",syntax:"c"},{label:"C++",syntax:"cpp"},{label:"Bash",syntax:"bas"},{label:"Java",syntax:"java"},{label:"Typescript",syntax:"ts"},{label:"React JSX ",syntax:"jsx"},{label:"React TSX",syntax:"tsx"},{label:"Git",syntax:"git"},{label:"Json",syntax:"json"}]),A=function(e){var t=e.children,n=Object(j.a)(e,["children"]),c=Object(a.useState)("javascript"),r=Object(m.a)(c,2),o=r[0],i=r[1];return l.a.createElement("div",{className:"prismjscode"},l.a.createElement("div",{className:"prismjscode-header",contentEditable:!1},l.a.createElement("select",{className:"prismjscode-switch",value:o,onChange:function(e){i(e.target.value)}},_.map((function(e){return l.a.createElement("option",{value:e.syntax,key:e.syntax},e.label)}))),l.a.createElement(O,null,"description")),l.a.createElement("pre",{className:"language-".concat(o)},l.a.createElement("code",n,t)))},H=Object(F.Map)({"code-block":{wrapper:l.a.createElement(A,null)}}),U=y.DefaultDraftBlockRenderMap.merge(H),J=function(e){var t=e.getCurrentContent(),n=e.getSelection().getStartKey();return t.getBlockForKey(n)},q=function(e,t){return J(t).getType()===e},P={getCurrentBlock:J,hasSelectionInBlock:q,onTabInCode:function(e,t){e.preventDefault();var n=t.getCurrentContent(),a=t.getSelection(),l=a.getStartKey(),c=(n.getBlockForKey(l).getText(),null);return c=a.isCollapsed()?v.a.Modifier.insertText(n,a,"  "):v.a.Modifier.replaceText(n,a,"  "),v.a.EditorState.push(t,c,"insert-characters")},hidePlaceholder:function(e){var t=e.getCurrentContent();return!t.hasText()&&"unstyled"!==t.getBlockMap().first().getType()},convertToState:function(e){try{var t=JSON.parse(e);return console.log(t),y.EditorState.createWithContent(Object(y.convertFromRaw)(t))}catch(l){var n=Object(y.convertFromHTML)(e),a=y.ContentState.createFromBlockArray(n.contentBlocks,n.entityMap);return y.EditorState.createWithContent(a)}}},G=function(e){return"blockquote"===e.getType()?"myeditor-blockquote":""},W=(n(261),n(262),function(e){var t=e.contentState,n=e.block;console.log(t,n);var a=t.getEntity(n.getEntityAt(0)).getData().src;return l.a.createElement("img",{src:a,alt:"flower",className:"lanting-editor-image"})}),X=function(e){return function(e){return"atomic"===e.getType()?{component:W,editable:!1}:null}},z=(n(263),function(e){var t=e.rawContent,n=e.onChange,c=Object(a.useRef)(null),r=y.EditorState.createEmpty(D),o=Object(a.useState)(!1),i=Object(m.a)(o,1)[0],s=Object(a.useState)(r),u=Object(m.a)(s,2),d=u[0],g=u[1];Object(a.useEffect)((function(){i||f(),p.a.highlightAll()}),[]),Object(a.useEffect)((function(){t&&g(P.convertToState(t))}),[t]);var f=function(){return c.current&&c.current.focus()},h=function(e){var t=Object(y.convertToRaw)(e.getCurrentContent());g(e),n&&n(t)},b=Object(a.useCallback)((function(){}),[]);return l.a.createElement("div",{className:S()("lanting-editor",{"lanting-editor-hideplaceholder":P.hidePlaceholder(d)}),id:"lanting-editor"},!i&&l.a.createElement(w,{onChange:h,editorState:d}),l.a.createElement(y.Editor,{ref:c,readOnly:i,placeholder:"Your Story",onChange:h,editorState:d,onFocus:function(){document.addEventListener("selectionchange",b)},onBlur:function(){document.removeEventListener("selectionchange",b)},onTab:function(e){P.hasSelectionInBlock("code-block",d)&&h(P.onTabInCode(e,d))},blockRenderMap:U,blockRendererFn:X(d),blockStyleFn:G,handleKeyCommand:function(e,t){var n=y.RichUtils.handleKeyCommand(t,e);return n?(g(n),"handled"):"not-handled"},handleReturn:function(e,t){var n=P.getCurrentBlock(t);return["blockquote","code-block"].includes(n.getType())?(h(y.RichUtils.insertSoftNewline(t)),"handled"):"not-handled"}}))}),Y=function(){return l.a.createElement("div",{className:"edit"},l.a.createElement(z,null))},$=(n(264),n(265),Object(o.atom)({key:"theme",default:localStorage.getItem("theme")||"light"})),Q=function(){var e=Object(o.useRecoilState)($),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(g.f)().pathname,i=Object(a.useMemo)((function(){return"/edit"===r}),[r]);return l.a.createElement("div",{className:S()("lanting-nav")},l.a.createElement("div",{className:"lanting-nav-inner"},l.a.createElement("div",{className:"lanting-nav-title"},l.a.createElement(d.b,{to:"/",className:"lanting-nav-link"},l.a.createElement("h2",{className:"lanting-nav-name"},"\u5170\u4ead")),l.a.createElement("div",{className:"lanting-nav-bio"},"\u6d41\u89de\u66f2\u6c34")),!i&&l.a.createElement(d.b,{className:"lanting-nav-edit",to:"/edit"},l.a.createElement(O,null,"edit")),l.a.createElement("span",{onClick:function(){console.log(n),c("dark"===n?"light":"dark")},className:"lanting-nav-theme"},"dark"===n?"\ud83c\udf19":"\u2600\ufe0f")))};var V=function(){var e=Object(o.useRecoilState)($),t=Object(m.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("theme")||"light";c(e),document.body.classList.add("theme-fade")}),[c]),Object(a.useEffect)((function(){"light"===n?(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")):(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")),localStorage.setItem("theme",n)}),[n]),l.a.createElement("div",{className:"app"},l.a.createElement(d.a,null,l.a.createElement(Q,null),l.a.createElement(g.a,{path:"/",exact:!0,component:b}),l.a.createElement(g.c,null,l.a.createElement(g.a,{path:"/edit",component:Y}))))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o.RecoilRoot,null,l.a.createElement(u,null,l.a.createElement(V,null)))),document.getElementById("root"))},51:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.cfd9f186.chunk.js.map