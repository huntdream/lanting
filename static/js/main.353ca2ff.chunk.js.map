{"version":3,"sources":["components/Apollo/index.tsx","components/Post/index.tsx","containers/Index/index.tsx","components/LantingEditor/Element/CodeElement.tsx","components/Icon/index.tsx","components/LantingEditor/MarkButton/index.tsx","components/LantingEditor/utils.ts","components/LantingEditor/Toolbar/index.tsx","components/LantingEditor/Element/DefaultElement.tsx","components/LantingEditor/Leaf/index.tsx","components/LantingEditor/index.tsx","containers/Edit/index.tsx","components/Nav/index.tsx","containers/App/index.tsx","index.tsx"],"names":["client","ApolloClient","uri","Apollo","children","Post","className","Index","range","map","item","key","CodeElement","attributes","element","Icon","style","props","cls","MarkButton","icon","active","onMouseDown","isMarkActive","editor","format","marks","Editor","Toolbar","useSlate","mark","event","preventDefault","removeMark","addMark","toggleMark","DefaultElement","type","Leaf","leaf","bold","code","italic","underline","LantingEditor","useState","text","value","setValue","useMemo","withReact","createEditor","renderLeaf","useCallback","renderElement","onChange","newValue","autoFocus","spellCheck","placeholder","onKeyDown","ctrlKey","Transforms","setNodes","match","n","Text","isText","split","Edit","Nav","pathname","useLocation","isEditPage","classNames","to","App","useEffect","localStorage","setItem","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.353ca2ff.chunk.js","sourcesContent":["import React from 'react';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport ApolloClient from 'apollo-boost';\n\ninterface ApolloProps {}\n\nconst client = new ApolloClient({\n  uri: 'http://localhost:4000',\n});\n\nconst Apollo: React.FC<ApolloProps> = ({ children }) => {\n  return <ApolloProvider client={client}>{children}</ApolloProvider>;\n};\n\nexport default Apollo;\n","import React from 'react';\nimport './style.scss';\n\ninterface PostProps {}\n\nconst Post: React.FC<PostProps> = () => {\n  return (\n    <article className='lanting-post'>\n      <header className='lanting-post-header'>\n        <h3 className='lanting-post-title'>兰亭集序</h3>\n      </header>\n      <main className='lanting-post-content'>仰观宇宙之大，俯察品类之盛</main>\n      <footer className='lanting-post-footer'>2020年07月08日15:58:23</footer>\n    </article>\n  );\n};\n\nexport default Post;\n","import React, { useEffect } from 'react';\nimport { range } from 'lodash';\nimport './style.scss';\nimport Post from 'components/Post';\n\ninterface IndexProps {}\n\nconst Index: React.FC<IndexProps> = () => {\n  return (\n    <div className='index'>\n      {range(10).map((item) => (\n        <Post key={item} />\n      ))}\n    </div>\n  );\n};\n\nexport default Index;\n","import React, { FC } from 'react';\nimport { RenderElementProps } from 'slate-react';\n\nconst CodeElement: FC<RenderElementProps> = ({\n  attributes,\n  children,\n  element,\n}) => {\n  return (\n    <pre {...attributes}>\n      <code>{children}</code>\n    </pre>\n  );\n};\n\nexport default CodeElement;\n","import React, { CSSProperties, HTMLAttributes } from 'react';\nimport cls from 'classnames';\n\ninterface IconProps extends HTMLAttributes<HTMLElement> {\n  className?: string;\n  style?: CSSProperties;\n  children: string;\n}\n\nconst Icon: React.FC<IconProps> = ({\n  className,\n  children,\n  style,\n  ...props\n}) => {\n  return (\n    <i className={cls('material-icons', className)} style={style} {...props}>\n      {children}\n    </i>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\nimport cls from 'classnames';\nimport './style.scss';\nimport Icon from 'components/Icon';\n\ninterface MarkButtonProps {\n  format: string;\n  icon: string;\n  active: boolean;\n  onMouseDown: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst MarkButton: React.FC<MarkButtonProps> = ({\n  icon,\n  active,\n  onMouseDown,\n}) => {\n  return (\n    <div\n      className={cls('mark-button', {\n        'mark-button--active': active,\n      })}\n      onMouseDown={onMouseDown}\n    >\n      <Icon className='mark-button-icon'>{icon}</Icon>\n    </div>\n  );\n};\n\nexport default MarkButton;\n","import { Editor } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nexport const isMarkActive = (editor: Editor & ReactEditor, format: string) => {\n  const marks = Editor.marks(editor);\n\n  return marks ? marks[format] === true : false;\n};\n\nexport const toggleMark = (editor: Editor & ReactEditor, format: string) => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n","import React from 'react';\nimport { ReactEditor, useSlate } from 'slate-react';\nimport { Editor } from 'slate';\n\nimport MarkButton from '../MarkButton';\nimport { isMarkActive, toggleMark } from '../utils';\nimport './style.scss';\n\ninterface ToolbarProps {}\n\nconst Toolbar: React.FC<ToolbarProps> = () => {\n  const editor = useSlate();\n\n  const marks = [\n    { format: 'bold', icon: 'format_bold' },\n    { format: 'italic', icon: 'format_italic' },\n    { format: 'underline', icon: 'format_underlined' },\n    { format: 'code', icon: 'code' },\n    { format: 'heading-one', icon: 'looks_one' },\n    { format: 'heading-two', icon: 'looks_two' },\n    { format: 'block-quote', icon: 'format_quote' },\n    { format: 'numbered-list', icon: 'format_list_numbered' },\n    { format: 'bulleted-list', icon: 'format_list_bulleted' },\n  ];\n\n  return (\n    <div className='lanting-editor-toolbar'>\n      {marks.map((mark) => (\n        <MarkButton\n          key={mark.format}\n          format={mark.format}\n          icon={mark.icon}\n          active={isMarkActive(editor, mark.format)}\n          onMouseDown={(event) => {\n            event.preventDefault();\n            toggleMark(editor, mark.format);\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default Toolbar;\n","import { RenderElementProps } from 'slate-react';\nimport React, { FC } from 'react';\n\nconst DefaultElement: FC<RenderElementProps> = ({\n  attributes,\n  children,\n  element,\n}) => {\n  switch (element.type) {\n    case 'block-quote':\n      return <blockquote {...attributes}>{children}</blockquote>;\n    case 'bulleted-list':\n      return <ul {...attributes}>{children}</ul>;\n    case 'heading-one':\n      return <h1 {...attributes}>{children}</h1>;\n    case 'heading-two':\n      return <h2 {...attributes}>{children}</h2>;\n    case 'list-item':\n      return <li {...attributes}>{children}</li>;\n    case 'numbered-list':\n      return <ol {...attributes}>{children}</ol>;\n    default:\n      return <p {...attributes}>{children}</p>;\n  }\n};\n\nexport default DefaultElement;\n","import React from 'react';\nimport { RenderLeafProps } from 'slate-react';\n\nconst Leaf: React.FC<RenderLeafProps> = ({ attributes, children, leaf }) => {\n  if (leaf.bold) {\n    children = <strong>{children}</strong>;\n  }\n\n  if (leaf.code) {\n    children = <code>{children}</code>;\n  }\n\n  if (leaf.italic) {\n    children = <em>{children}</em>;\n  }\n\n  if (leaf.underline) {\n    children = <u>{children}</u>;\n  }\n\n  return <span {...attributes}>{children}</span>;\n};\n\nexport default Leaf;\n","import React, { useState, useMemo, KeyboardEvent, useCallback } from 'react';\nimport { createEditor, Node, Transforms, Text } from 'slate';\nimport { Slate, Editable, withReact, RenderElementProps } from 'slate-react';\nimport CodeElement from './Element/CodeElement';\nimport Toolbar from './Toolbar';\nimport DefaultElement from './Element/DefaultElement';\nimport Leaf from './Leaf';\nimport './style.scss';\n\ninterface LantingEditorProps {}\n\nconst LantingEditor: React.FC<LantingEditorProps> = () => {\n  const [value, setValue] = useState<Node[]>([\n    {\n      type: 'paragraph',\n      children: [{ text: '' }],\n    },\n  ]);\n\n  const editor = useMemo(() => withReact(createEditor()), []);\n\n  const handleKeyDown = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (event.ctrlKey) {\n      switch (event.key) {\n        case 'b':\n          event.preventDefault();\n\n          Transforms.setNodes(\n            editor,\n            { bold: true },\n            { match: (n) => Text.isText(n), split: true }\n          );\n          break;\n      }\n    }\n  };\n\n  const renderLeaf = useCallback((props) => <Leaf {...props} />, []);\n\n  const renderElement = useCallback((props: RenderElementProps) => {\n    switch (props.element.type) {\n      case 'code':\n        return <CodeElement {...props} />;\n      default:\n        return <DefaultElement {...props} />;\n    }\n  }, []);\n\n  return (\n    <Slate\n      editor={editor}\n      value={value}\n      onChange={(newValue) => setValue(newValue)}\n    >\n      <Toolbar />\n      <Editable\n        autoFocus\n        spellCheck\n        className='my-editor'\n        placeholder='Tell a story...'\n        renderElement={renderElement}\n        renderLeaf={renderLeaf}\n        onKeyDown={handleKeyDown}\n      />\n    </Slate>\n  );\n};\n\nexport default LantingEditor;\n","import React from 'react';\nimport './style.scss';\nimport LantingEditor from 'components/LantingEditor';\n\ninterface EditProps {}\n\nconst Edit: React.FC<EditProps> = () => {\n  return (\n    <div className='edit'>\n      <LantingEditor />\n    </div>\n  );\n};\n\nexport default Edit;\n","import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport './style.scss';\nimport { Link, useLocation } from 'react-router-dom';\nimport Icon from 'components/Icon';\n\ninterface NavProps {}\n\nconst Nav: React.FC<NavProps> = () => {\n  const { pathname } = useLocation();\n\n  const isEditPage = useMemo(() => {\n    return pathname === '/edit';\n  }, [pathname]);\n\n  return (\n    <div className={classNames(`lanting-nav`)}>\n      <div className='lanting-nav-inner'>\n        <div className='lanting-nav-title'>\n          <Link to='/' className='lanting-nav-link'>\n            <h2 className='lanting-nav-name'>兰亭</h2>\n          </Link>\n          <div className='lanting-nav-bio'>流觞曲水</div>\n        </div>\n        {!isEditPage && (\n          <Link className='lanting-nav-edit' to='/edit'>\n            <Icon>edit</Icon>\n          </Link>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Nav;\n","import React, { useEffect } from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Index from 'containers/Index';\nimport Edit from 'containers/Edit';\nimport './style.scss';\nimport Nav from 'components/Nav';\n\nfunction App() {\n  useEffect(() => {\n    localStorage.setItem('color-mode', 'light');\n  }, []);\n\n  return (\n    <div className='app'>\n      <BrowserRouter>\n        <Nav />\n\n        <Route path='/' exact component={Index} />\n        <Switch>\n          <Route path='/edit' component={Edit} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport Apollo from 'components/Apollo';\nimport App from './containers/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Apollo>\n      <App />\n    </Apollo>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}