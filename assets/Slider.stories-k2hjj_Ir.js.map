{"version":3,"file":"Slider.stories-k2hjj_Ir.js","sources":["../../src/components/Slider/useDrag.ts","../../src/components/Slider/index.tsx"],"sourcesContent":["import { RefObject, useState } from 'react'\n\ntype DragParams = {\n  containerRef: RefObject<HTMLDivElement>,\n  handlerRef: RefObject<HTMLDivElement>\n}\n\nconst useDrag = ({ containerRef, handlerRef }: DragParams) => {\n  const [offset, setOffset] = useState()\n\n  const onDragStart = () => { }\n\n  return [offset]\n}\n\nexport default useDrag","import React, { useCallback, useRef, useState } from 'react';\nimport './style.scss';\nimport useDrag from './useDrag';\n\ninterface Props {\n  value: number;\n  direction?: 'x' | 'y';\n}\n\nconst Slider: React.FC<Props> = ({ value, direction = 'x' }) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const handlerRef = useRef<HTMLDivElement>(null);\n  const [] = useDrag({ containerRef, handlerRef });\n  const [offsetValue, setOffsetValue] = useState<number>(0);\n\n  const handleMove = useCallback(\n    (e: MouseEvent | TouchEvent | React.MouseEvent<HTMLDivElement>) => {\n      if (!containerRef.current || !handlerRef.current) return;\n      const evt = 'touches' in e ? e.touches[0] : e;\n\n      const pageX =\n        evt.pageX - document.documentElement.scrollLeft ||\n        document.body.scrollLeft ||\n        window.scrollX;\n\n      const pageY =\n        evt.pageY - document.documentElement.scrollTop ||\n        document.body.scrollTop ||\n        window.scrollY;\n\n      const {\n        x: rectX,\n        y: rectY,\n        width,\n        height,\n      } = containerRef.current.getBoundingClientRect();\n\n      const { width: targetWidth, height: targetHeight } =\n        handlerRef.current.getBoundingClientRect();\n\n      const centerOffsetX = targetWidth / 2;\n      const centerOffsetY = targetHeight / 2;\n\n      const offsetX =\n        Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n      const offsetY =\n        Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n      console.log(offsetX);\n      setOffsetValue(direction === 'x' ? offsetX : offsetY);\n    },\n    []\n  );\n\n  console.log(offsetValue, 'offsetValue');\n\n  const handleEnd = useCallback(() => {\n    document.removeEventListener('mousemove', handleMove);\n    document.removeEventListener('touchmove', handleMove);\n\n    document.removeEventListener('mouseup', handleMove);\n    document.removeEventListener('touchend', handleMove);\n  }, [handleMove]);\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n    handleMove(e);\n\n    document.addEventListener('mousemove', handleMove);\n    document.addEventListener('touchmove', handleMove);\n\n    document.addEventListener('mouseup', handleEnd);\n    document.addEventListener('touchend', handleEnd);\n  };\n\n  return (\n    <div\n      className='lanting-slider'\n      ref={containerRef}\n      onMouseDown={handleMouseDown}\n    >\n      <div\n        className='lanting-slider-track'\n        style={{ width: `${offsetValue + 8}px` }}\n      ></div>\n      <div\n        className='lanting-slider-handler'\n        ref={handlerRef}\n        style={{ left: `${offsetValue}px` }}\n      ></div>\n    </div>\n  );\n};\n\nexport default Slider;\n"],"names":["useDrag","containerRef","handlerRef","offset","setOffset","useState","Slider","value","direction","useRef","offsetValue","setOffsetValue","handleMove","useCallback","e","evt","pageX","pageY","rectX","rectY","width","height","targetWidth","targetHeight","centerOffsetX","centerOffsetY","offsetX","offsetY","handleEnd","handleMouseDown","jsxs","jsx"],"mappings":"6HAOA,MAAMA,EAAU,CAAC,CAAE,aAAAC,EAAc,WAAAC,KAA6B,CAC5D,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAS,SAAA,EAIrC,MAAO,CAACF,CAAM,CAChB,ECJAG,EAAA,CAAA,CAAA,MAAAC,EAAA,UAAAC,EAAA,GAAA,IAAA,CACE,MAAAP,EAAAQ,SAAA,IAAA,EACAP,EAAAO,SAAA,IAAA,EACAT,EAAA,CAAA,aAAAC,EAAA,WAAAC,EAAA,EACA,KAAA,CAAAQ,EAAAC,CAAA,EAAAN,EAAA,SAAA,CAAA,EAEAO,EAAAC,EAAA,YAAmBC,GAAA,CAEf,GAAA,CAAAb,EAAA,SAAA,CAAAC,EAAA,QAAkD,OAClD,MAAAa,EAAA,YAAAD,EAAAA,EAAA,QAAA,CAAA,EAAAA,EAEAE,EAAAD,EAAA,MAAA,SAAA,gBAAA,YAAA,SAAA,KAAA,YAAA,OAAA,QAKAE,EAAAF,EAAA,MAAA,SAAA,gBAAA,WAAA,SAAA,KAAA,WAAA,OAAA,QAKA,CAAM,EAAAG,EACD,EAAAC,EACA,MAAAC,EACH,OAAAC,CACA,EAAApB,EAAA,QAAA,wBAGF,CAAA,MAAAqB,EAAA,OAAAC,CAAA,EAAArB,EAAA,QAAA,wBAGAsB,EAAAF,EAAA,EACAG,EAAAF,EAAA,EAEAG,EAAA,KAAA,IAAA,EAAA,KAAA,IAAAV,EAAAE,EAAAE,CAAA,CAAA,EAAAI,EAEAG,EAAA,KAAA,IAAA,EAAA,KAAA,IAAAV,EAAAE,EAAAE,CAAA,CAAA,EAAAI,EAEA,QAAA,IAAAC,CAAA,EACAf,EAAAH,IAAA,IAAAkB,EAAAC,CAAA,CAAoD,EACtD,CAAA,CACC,EAGH,QAAA,IAAAjB,EAAA,aAAA,EAEA,MAAAkB,EAAAf,EAAAA,YAAA,IAAA,CACE,SAAA,oBAAA,YAAAD,CAAA,EACA,SAAA,oBAAA,YAAAA,CAAA,EAEA,SAAA,oBAAA,UAAAA,CAAA,EACA,SAAA,oBAAA,WAAAA,CAAA,CAAmD,EAAA,CAAAA,CAAA,CAAA,EAGrDiB,EAAAf,GAAA,CACEF,EAAAE,CAAA,EAEA,SAAA,iBAAA,YAAAF,CAAA,EACA,SAAA,iBAAA,YAAAA,CAAA,EAEA,SAAA,iBAAA,UAAAgB,CAAA,EACA,SAAA,iBAAA,WAAAA,CAAA,CAA+C,EAGjD,OAAAE,EAAA,KACE,MAAC,CAAA,UAAA,iBACW,IAAA7B,EACL,YAAA4B,EACQ,SAAA,CAEbE,EAAA,IAAA,MAAC,CAAA,UAAA,uBACW,MAAA,CAAA,MAAA,GAAArB,EAAA,CAAA,IAAA,CAC6B,CAAA,EACxCqB,EAAA,IACD,MAAC,CAAA,UAAA,yBACW,IAAA7B,EACL,MAAA,CAAA,KAAA,GAAAQ,CAAA,IAAA,CAC6B,CAAA,CACnC,CAAA,CAAA,CAGP"}