import{j as u}from"./jsx-runtime-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{r as R}from"./index-BQaZqJLe.js";import{c as b}from"./index-CKcLqzwt.js";import{I as P}from"./index-BEZTy1Yy.js";const D=()=>crypto.randomUUID().split("-")[0],q=({id:i,text:a,showProgress:c,close:p,closing:d,playState:t,onClose:n,onStartClose:e})=>{const s=r=>{r.target!==r.currentTarget||!d||n(i)};return u.jsxs("div",{className:b("lanting-toast-bar",{"lanting-toast-bar--slideout":d}),onAnimationEnd:s,children:[u.jsx("div",{className:"lanting-toast-bar-content",children:a}),p&&u.jsx(P,{onClick:e,name:"close"}),c&&u.jsx("div",{className:"lanting-toast-progress",style:{animationPlayState:t}})]})};q.__docgenInfo={description:"",methods:[],displayName:"ToastBar",props:{id:{required:!0,tsType:{name:"string"},description:""},text:{required:!0,tsType:{name:"ReactNode"},description:""},showProgress:{required:!1,tsType:{name:"boolean"},description:""},playState:{required:!1,tsType:{name:"string"},description:""},close:{required:!1,tsType:{name:"boolean"},description:""},closing:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onStartClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const w=({id:i,text:a,close:c,offset:p,position:d="top",timeout:t=3e3,showProgress:n,updateHeight:e,onClose:s})=>{const r=o.useRef(null),m=o.useRef(Date.now()),l=o.useRef(0),[f,C]=o.useState(t),[j,T]=o.useState(!1),[S,h]=o.useState("running");o.useEffect(()=>{l.current=window.setTimeout(()=>{g()},t)},[i,s,t]),o.useEffect(()=>{if(r.current){const y=r.current,{height:E}=y.getBoundingClientRect();e(i,E)}},[]);const I=()=>{T(!1),clearTimeout(l.current);const y=f-(Date.now()-m.current);C(y),h("paused")},N=()=>{l.current=window.setTimeout(()=>{g()},f),m.current=Date.now(),h("running")},g=()=>{T(!0)},[v,x]=d.split("-");return u.jsx("div",{className:b("lanting-toast-item",{[`lanting-toast--${v}`]:v,[`lanting-toast--${x}`]:x}),onMouseEnter:I,onMouseLeave:N,ref:r,style:{transform:`translateY(${p}px)`},children:u.jsx(q,{id:i,onStartClose:g,onClose:s,close:c,playState:S,showProgress:n,text:a,closing:j})})};w.__docgenInfo={description:"",methods:[],displayName:"Toaster",props:{id:{required:!0,tsType:{name:"string"},description:""},text:{required:!0,tsType:{name:"ReactNode"},description:""},close:{required:!1,tsType:{name:"boolean"},description:""},timeout:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3000",computed:!1}},height:{required:!1,tsType:{name:"number"},description:""},position:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-right'
| 'top-left'
| 'bottom'
| 'bottom-right'
| 'bottom-left'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'bottom-left'"}]},description:"",defaultValue:{value:"'top'",computed:!1}},showProgress:{required:!1,tsType:{name:"boolean"},description:""},offset:{required:!0,tsType:{name:"number"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},updateHeight:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, height: number) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"number"},name:"height"}],return:{name:"void"}}},description:""}}};const _=({updateList:i,list:a})=>{const c=o.useCallback(t=>{i(n=>n.filter(e=>e.id!==t))},[]),p=(t,n)=>{i(e=>e.map(s=>s.id===t?{...s,height:n}:s))},d=(t,n)=>{const e=a.filter(l=>l.position===n),s=e.findIndex(l=>l.id===t),r=n.includes("top");return e.slice(s+1).reverse().reduce((l,f)=>l+(f.height||0)+16,0)*(r?1:-1)};return R.createPortal(u.jsx("div",{className:"lanting-toast",children:a.map(({id:t,...n})=>{const e=d(t,n.position);return u.jsx(w,{id:t,...n,offset:e,onClose:c,updateHeight:p},t)})}),document.body)},L=o.createContext({}),k=({children:i})=>{const[a,c]=o.useState([]),d={toast:o.useCallback((t,n)=>{const e={text:t,position:"top",...n},s=[...a];if(e.id){const r=a.findIndex(m=>m.id===e.id);r!==-1&&e.id?s[r]=e:s.push(e)}else{const r=D();s.push({...e,id:r})}c(s)},[a])};return u.jsxs(L.Provider,{value:d,children:[i,u.jsx(_,{list:a,updateList:c})]})};k.__docgenInfo={description:"",methods:[],displayName:"Toast",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};export{k as T,L as a};
