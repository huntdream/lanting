import{j as l,c as j}from"./index-111a7888.js";import{r as c,R as S}from"./index-76fb7be0.js";import{r as B}from"./index-d3ea75b5.js";import{a as I}from"./index-ea95538a.js";import{B as O}from"./index-f7ba4c4a.js";import"./_commonjsHelpers-de833af9.js";const w=({title:r,rect:b,placement:p="top",isClosing:v,onClose:y})=>{const o=c.useRef(null),[x,g]=c.useState("");c.useEffect(()=>{const a=new ResizeObserver(s=>{for(const f of s)f.contentRect&&E()});return o.current&&a.observe(o.current),()=>a.disconnect()},[p]),c.useEffect(()=>{const a=()=>{y()};return o.current&&v&&o.current.addEventListener("animationend",a),()=>{var s;return(s=o.current)==null?void 0:s.removeEventListener("animationend",a)}},[v]);const E=()=>{if(!o.current)return;const{width:a,left:s,top:f,height:m}=b,e=window.scrollX+s,u=window.scrollY+f,{width:T,height:h}=o.current.getBoundingClientRect();let i=e,d=u;switch(p){case"right":i=e+a,d=u+m/2-h/2;break;case"bottom":i=e+a/2-T/2,d=u+m;break;case"left":i=e-T,d=u+m/2-h/2;break;default:i=e+a/2-T/2,d=u-h;break}i=Math.max(0,i),d=Math.max(0,d),g(`translate(${i}px, ${d}px)`)};return l.jsx("div",{className:j("lanting-tooltip-container",`lanting-tooltip--${p}`),ref:o,style:{transform:x},children:l.jsx("div",{className:j("lanting-tooltip-content",{"lanting-tooltip-content--fadeOut":v}),children:r})})};try{w.displayName="Tip",w.__docgenInfo={description:"",displayName:"Tip",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},rect:{defaultValue:null,description:"",name:"rect",required:!0,type:{name:"DOMRect"}},placement:{defaultValue:{value:"top"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},isClosing:{defaultValue:null,description:"",name:"isClosing",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const R=({children:r,title:b,timeout:p=0,placement:v})=>{const y=c.useRef(0),[o,x]=c.useState(!1),[g,E]=c.useState(),[a,s]=c.useState(!1),f=I,m=S.Children.only(r),e=(m==null?void 0:m.props)||{},u=n=>{if(s(!1),!o){const t=n.currentTarget;E(t.getBoundingClientRect()),p>0?y.current=window.setTimeout(()=>{x(!0)},p):x(!0)}},T=()=>{console.log("let close"),x(!1),E(void 0)},h=n=>{s(!0),y.current&&clearTimeout(y.current)},N={onMouseEnter:n=>{var t;(t=e==null?void 0:e.onMouseEnter)==null||t.call(e,n),!f&&u(n)},onMouseLeave:n=>{var t;(t=e==null?void 0:e.onMouseLeave)==null||t.call(e,n),!f&&h()},onTouchStart:n=>{var t;u(n),(t=e==null?void 0:e.onTouchStart)==null||t.call(e,n)},onTouchEnd:n=>{var t;h(),(t=e==null?void 0:e.onTouchEnd)==null||t.call(e,n)}},L=c.isValidElement(r)&&S.cloneElement(r,N);return l.jsxs(l.Fragment,{children:[L,o&&g&&B.createPortal(l.jsx(w,{title:b,rect:g,isClosing:a,placement:v,onClose:T}),document.body)]})};try{R.displayName="Tooltip",R.__docgenInfo={description:"",displayName:"Tooltip",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ReactNode"}},timeout:{defaultValue:{value:"0"},description:"",name:"timeout",required:!1,type:{name:"number"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}}}}}catch{}const U={component:R},k="夫寵而不驕，驕而能降，降而不憾，憾而能眕者，鮮矣",_={args:{children:l.jsx(O,{children:"Tootip"}),title:k},decorators:[r=>l.jsx("div",{style:{height:"300px",overflow:"auto"},children:l.jsx("div",{style:{margin:"3em",display:"flex",alignContent:"center",justifyContent:"center",height:"400px"},children:l.jsx(r,{})})})]};var M,V,q;_.parameters={..._.parameters,docs:{...(M=_.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    children: <Button>Tootip</Button>,
    title: text
  },
  decorators: [Story => <div style={{
    height: '300px',
    overflow: 'auto'
  }}>
        <div style={{
      margin: '3em',
      display: 'flex',
      alignContent: 'center',
      justifyContent: 'center',
      height: '400px'
    }}>
          <Story />
        </div>
      </div>]
}`,...(q=(V=_.parameters)==null?void 0:V.docs)==null?void 0:q.source}}};const A=["Primary"];export{_ as Primary,A as __namedExportsOrder,U as default};
//# sourceMappingURL=Tooltip.stories-165c60a7.js.map
