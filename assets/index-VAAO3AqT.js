import{j as l}from"./jsx-runtime-vNq4Oc-g.js";import{r}from"./index-4g5l5LRQ.js";import{r as E}from"./index-jmm5gWkb.js";import{c as b}from"./index-EtqCS5in.js";import{I as D}from"./index-X43VlhMI.js";const R=()=>crypto.randomUUID().split("-")[0],h=({id:o,text:i,showProgress:d,close:p,closing:c,playState:t,onClose:a,onStartClose:e})=>{const n=s=>{s.target!==s.currentTarget||!c||a(o)};return l.jsxs("div",{className:b("lanting-toast-bar",{"lanting-toast-bar--slideout":c}),onAnimationEnd:n,children:[l.jsx("div",{className:"lanting-toast-bar-content",children:i}),p&&l.jsx(D,{onClick:e,name:"close"}),d&&l.jsx("div",{className:"lanting-toast-progress",style:{animationPlayState:t}})]})};try{h.displayName="ToastBar",h.__docgenInfo={description:"",displayName:"ToastBar",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"ReactNode"}},showProgress:{defaultValue:null,description:"",name:"showProgress",required:!1,type:{name:"boolean"}},playState:{defaultValue:null,description:"",name:"playState",required:!1,type:{name:"string"}},close:{defaultValue:null,description:"",name:"close",required:!1,type:{name:"boolean"}},closing:{defaultValue:null,description:"",name:"closing",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(id: string) => void"}},onStartClose:{defaultValue:null,description:"",name:"onStartClose",required:!0,type:{name:"() => void"}}}}}catch{}const _=({id:o,text:i,close:d,offset:p,position:c="top",timeout:t=3e3,showProgress:a,updateHeight:e,onClose:n})=>{const s=r.useRef(null),m=r.useRef(Date.now()),u=r.useRef(0),[f,S]=r.useState(t),[w,v]=r.useState(!1),[N,T]=r.useState("running");r.useEffect(()=>{u.current=window.setTimeout(()=>{g()},t)},[o,n,t]),r.useEffect(()=>{if(s.current){const y=s.current,{height:P}=y.getBoundingClientRect();e(o,P)}},[]);const I=()=>{v(!1),clearTimeout(u.current);const y=f-(Date.now()-m.current);S(y),T("paused")},j=()=>{u.current=window.setTimeout(()=>{g()},f),m.current=Date.now(),T("running")},g=()=>{v(!0)},[q,C]=c.split("-");return l.jsx("div",{className:b("lanting-toast-item",{[`lanting-toast--${q}`]:q,[`lanting-toast--${C}`]:C}),onMouseEnter:I,onMouseLeave:j,ref:s,style:{transform:`translateY(${p}px)`},children:l.jsx(h,{id:o,onStartClose:g,onClose:n,close:d,playState:N,showProgress:a,text:i,closing:w})})};try{_.displayName="Toaster",_.__docgenInfo={description:"",displayName:"Toaster",props:{offset:{defaultValue:null,description:"",name:"offset",required:!0,type:{name:"number"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(id: string) => void"}},updateHeight:{defaultValue:null,description:"",name:"updateHeight",required:!0,type:{name:"(id: string, height: number) => void"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"ReactNode"}},close:{defaultValue:null,description:"",name:"close",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"3000"},description:"",name:"timeout",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},position:{defaultValue:{value:"top"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"bottom"'},{value:'"top-right"'},{value:'"top-left"'},{value:'"bottom-right"'},{value:'"bottom-left"'}]}},showProgress:{defaultValue:null,description:"",name:"showProgress",required:!1,type:{name:"boolean"}}}}}catch{}const x=({updateList:o,list:i})=>{const d=r.useCallback(t=>{o(a=>a.filter(e=>e.id!==t))},[]),p=(t,a)=>{o(e=>e.map(n=>n.id===t?{...n,height:a}:n))},c=(t,a)=>{const e=i.filter(u=>u.position===a),n=e.findIndex(u=>u.id===t),s=a.includes("top");return e.slice(n+1).reverse().reduce((u,f)=>u+(f.height||0)+16,0)*(s?1:-1)};return E.createPortal(l.jsx("div",{className:"lanting-toast",children:i.map(({id:t,...a})=>{const e=c(t,a.position);return l.jsx(_,{id:t,...a,offset:e,onClose:d,updateHeight:p},t)})}),document.body)};try{x.displayName="Toasts",x.__docgenInfo={description:"",displayName:"Toasts",props:{updateList:{defaultValue:null,description:"",name:"updateList",required:!0,type:{name:"Dispatch<SetStateAction<IToastConfig[]>>"}},list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"IToastConfig[]"}}}}}catch{}const L=r.createContext({}),V=({children:o})=>{const[i,d]=r.useState([]),c={toast:r.useCallback((t,a)=>{const e={text:t,position:"top",...a},n=[...i];if(e.id){const s=i.findIndex(m=>m.id===e.id);s!==-1&&e.id?n[s]=e:n.push(e)}else{const s=R();n.push({...e,id:s})}d(n)},[i])};return l.jsxs(L.Provider,{value:c,children:[o,l.jsx(x,{list:i,updateList:d})]})};try{V.displayName="Toast",V.__docgenInfo={description:"",displayName:"Toast",props:{}}}catch{}export{V as T,L as a};
