(this.webpackJsonplanting=this.webpackJsonplanting||[]).push([[0],{118:function(e,t,n){e.exports=n(234)},123:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},225:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(65),c=n.n(r),o=(n(123),n(237)),i=new(n(117).a)({uri:"http://localhost:4000"}),s=function(e){var t=e.children;return l.a.createElement(o.a,{client:i},t)},u=n(39),m=n(9),d=n(113),g=(n(127),n(128),function(){return l.a.createElement("article",{className:"lanting-post"},l.a.createElement("header",{className:"lanting-post-header"},l.a.createElement("h3",{className:"lanting-post-title"},"\u5170\u4ead\u96c6\u5e8f")),l.a.createElement("main",{className:"lanting-post-content"},"\u4ef0\u89c2\u5b87\u5b99\u4e4b\u5927\uff0c\u4fef\u5bdf\u54c1\u7c7b\u4e4b\u76db"),l.a.createElement("footer",{className:"lanting-post-footer"},"2020\u5e7407\u670808\u65e515:58:23"))}),f=function(){return l.a.createElement("div",{className:"index"},Object(d.range)(10).map((function(e){return l.a.createElement(g,{key:e})})))},h=(n(129),n(23)),b=n(8),v=n.n(b),y=n(31),E=n.n(y),p=(n(224),n(26)),k=n.n(p),C=(n(50),function(e){var t=e.active,n=e.className,a=e.label,r=e.onToggle;return l.a.createElement("div",{onMouseDown:function(e){e.preventDefault(),r()},className:k()("stylecontrols-button",{"stylecontrols-button--active":t},n)},a)}),S=n(53),j=function(e){var t=e.className,n=e.children,a=e.style,r=(e.onClick,Object(S.a)(e,["className","children","style","onClick"]));return l.a.createElement("i",Object.assign({className:k()("material-icons","lanting-icon--clickable",t),style:a},r),n)},N=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:l.a.createElement(j,null,"format_quote"),style:"blockquote"},{label:l.a.createElement(j,null,"format_list_bulleted"),style:"unordered-list-item"},{label:l.a.createElement(j,null,"format_list_numbered"),style:"ordered-list-item"},{label:l.a.createElement(j,null,"code"),style:"code-block"}],O=function(e){var t=e.editorState,n=e.onChange,a=t.getSelection(),r=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return l.a.createElement("div",{className:"stylecontrols-block"},N.map((function(e){var a=e.label,c=e.style;return l.a.createElement(C,{active:c===r,className:"stylecontrols-".concat(c.toLowerCase()),key:c,label:a,onToggle:function(){return function(e){n(b.RichUtils.toggleBlockType(t,e))}(c)}})})))},T=[{label:l.a.createElement(j,null,"format_bold"),style:"BOLD"},{label:l.a.createElement(j,null,"format_italic"),style:"ITALIC"},{label:l.a.createElement(j,null,"format_underline"),style:"UNDERLINE"},{label:l.a.createElement(j,null,"format_strikethrough"),style:"STRIKETHROUGH"}],x=function(e){var t=e.editorState,n=e.onChange,a=t.getCurrentInlineStyle();return l.a.createElement("div",{className:"stylecontrols-block"},T.map((function(e){var r=e.label,c=e.style;return l.a.createElement(C,{active:a.has(c),key:c,label:r,onToggle:function(){return e=c,void n(b.RichUtils.toggleInlineStyle(t,e));var e}})})))},B=function(e){var t=e.editorState,n=e.onChange;return l.a.createElement("div",{className:"stylecontrols"},l.a.createElement(O,{editorState:t,onChange:n}),l.a.createElement(x,{editorState:t,onChange:n}))},R=n(114),w=n(115),I=n(4),K=n.n(I);var M=new(function(){function e(){Object(R.a)(this,e),this.highlighted={}}return Object(w.a)(e,[{key:"getDecorations",value:function(e,t){var n,a=this,l=0,r=0,c=e.getType(),o=e.getText(),i=e.getKey(),s=Array(o.length).fill(null);if(!["code-block"].includes(c))return K.a.List(s);var u=null===(n=document.querySelector("pre[class*=language-]"))||void 0===n?void 0:n.className,m=u?/(?<=language-)\w+$/.exec(u):["javascript"],d=E.a.tokenize(o,function(e){return e&&E.a.languages[e]?E.a.languages[e]:E.a.languages.javascript}(m?m[0]:""));this.highlighted[i]={};for(var g=function e(t,n,l){if("string"!==typeof n){var c="tk"+r++,o=i+"-"+c;a.highlighted[i][c]=n,function(e,t,n,a){for(var l=t;l<n;l++)e[l]=a}(t,l,l+n.length,o);for(var s=l,u=0;u<n.content.length;u++){var m=n.content[u];e(t,m,s),s+=m.length}}},f=0;f<d.length;f++){var h=d[f];g(s,h,l),l+=h.length}return K.a.List(s)}},{key:"getComponentForKey",value:function(e){return function(e){return l.a.createElement("span",{className:"token ".concat(e.type)},e.children)}}},{key:"getPropsForKey",value:function(e){var t=e.split("-"),n=Object(h.a)(t,2),a=n[0],l=n[1];return{type:this.highlighted[a][l].type}}}]),e}()),F=(n(225),[{label:"Javascript",syntax:"javascript"},{label:"CSS",syntax:"css"},{label:"HTML",syntax:"html"},{label:"Golang",syntax:"golang"},{label:"C",syntax:"c"},{label:"C++",syntax:"cpp"},{label:"Bash",syntax:"bas"},{label:"Java",syntax:"java"},{label:"Typescript",syntax:"ts"},{label:"React JSX ",syntax:"jsx"},{label:"React TSX",syntax:"tsx"},{label:"Git",syntax:"git"},{label:"Json",syntax:"json"}]),L=function(e){var t=e.children,n=Object(S.a)(e,["children"]),r=Object(a.useState)("javascript"),c=Object(h.a)(r,2),o=c[0],i=c[1];return l.a.createElement("div",{className:"prismjscode"},l.a.createElement("div",{className:"prismjscode-header",contentEditable:!1},l.a.createElement("select",{className:"prismjscode-switch",value:o,onChange:function(e){i(e.target.value)}},F.map((function(e){return l.a.createElement("option",{value:e.syntax,key:e.syntax},e.label)}))),l.a.createElement(j,null,"description")),l.a.createElement("pre",{className:"language-".concat(o)},l.a.createElement("code",n,t)))},_=Object(I.Map)({"code-block":{wrapper:l.a.createElement(L,null)}}),D=b.DefaultDraftBlockRenderMap.merge(_),H=function(e){var t=e.getCurrentContent(),n=e.getSelection().getStartKey();return t.getBlockForKey(n)},J=function(e,t){return H(t).getType()===e},q={getCurrentBlock:H,hasSelectionInBlock:J,onTabInCode:function(e,t){e.preventDefault();var n=t.getCurrentContent(),a=t.getSelection(),l=a.getStartKey(),r=(n.getBlockForKey(l).getText(),null);return r=a.isCollapsed()?v.a.Modifier.insertText(n,a,"  "):v.a.Modifier.replaceText(n,a,"  "),v.a.EditorState.push(t,r,"insert-characters")},hidePlaceholder:function(e){var t=e.getCurrentContent();return!t.hasText()&&"unstyled"!==t.getBlockMap().first().getType()},convertToState:function(e){try{var t=JSON.parse(e);return console.log(t),b.EditorState.createWithContent(Object(b.convertFromRaw)(t))}catch(l){var n=Object(b.convertFromHTML)(e),a=b.ContentState.createFromBlockArray(n.contentBlocks,n.entityMap);return b.EditorState.createWithContent(a)}}},U=function(e){return"blockquote"===e.getType()?"myeditor-blockquote":""},A=(n(226),function(e){e.getType(),e.getText()}),G=(n(227),function(e){var t=e.rawContent,n=e.onChange,r=Object(a.useRef)(null),c=b.EditorState.createEmpty(M),o=Object(a.useState)(!1),i=Object(h.a)(o,2),s=i[0],u=(i[1],Object(a.useState)(!1)),m=Object(h.a)(u,2),d=(m[0],m[1],Object(a.useState)({x:0,y:0})),g=Object(h.a)(d,2),f=(g[0],g[1],Object(a.useState)(c)),v=Object(h.a)(f,2),y=v[0],p=v[1];Object(a.useEffect)((function(){s||C(),E.a.highlightAll()}),[]),Object(a.useEffect)((function(){console.log(t),t&&p(q.convertToState(t))}),[t]);var C=function(){return r.current&&r.current.focus()},S=function(e){var t=Object(b.convertToRaw)(e.getCurrentContent());p(e),n&&n(t)},j=function(){var e,t=function(){var e=window.getSelection();return e&&1===e.rangeCount?e.getRangeAt(0):null}(),n=null===(e=document.getElementById("lanting-editor"))||void 0===e?void 0:e.getBoundingClientRect();if(t&&t.startOffset!==t.endOffset&&n){var a=t.getBoundingClientRect();return{x:(a.right+a.left)/2,y:a.top-48}}return null},N=Object(a.useCallback)((function(e){j()}),[]);return l.a.createElement("div",{className:k()("lanting-editor",{"lanting-editor-hideplaceholder":q.hidePlaceholder(y)}),id:"lanting-editor"},!s&&l.a.createElement(B,{onChange:S,editorState:y}),l.a.createElement(b.Editor,{ref:r,readOnly:s,placeholder:"Your Story",onChange:S,editorState:y,onFocus:function(e){document.addEventListener("selectionchange",N)},onBlur:function(e){document.removeEventListener("selectionchange",N)},onTab:function(e){q.hasSelectionInBlock("code-block",y)&&S(q.onTabInCode(e,y))},blockRenderMap:D,blockRendererFn:A,blockStyleFn:U,handleKeyCommand:function(e,t){var n=b.RichUtils.handleKeyCommand(t,e);return n?(p(n),"handled"):"not-handled"},handleReturn:function(e,t){var n=q.getCurrentBlock(t);return["blockquote","code-block"].includes(n.getType())?(S(b.RichUtils.insertSoftNewline(t)),"handled"):"not-handled"}}))}),P=function(){return l.a.createElement("div",{className:"edit"},l.a.createElement(G,null))},W=(n(228),n(229),function(){var e=Object(m.f)().pathname,t=Object(a.useMemo)((function(){return"/edit"===e}),[e]);return l.a.createElement("div",{className:k()("lanting-nav")},l.a.createElement("div",{className:"lanting-nav-inner"},l.a.createElement("div",{className:"lanting-nav-title"},l.a.createElement(u.b,{to:"/",className:"lanting-nav-link"},l.a.createElement("h2",{className:"lanting-nav-name"},"\u5170\u4ead")),l.a.createElement("div",{className:"lanting-nav-bio"},"\u6d41\u89de\u66f2\u6c34")),!t&&l.a.createElement(u.b,{className:"lanting-nav-edit",to:"/edit"},l.a.createElement(j,null,"edit"))))});var X=function(){return Object(a.useEffect)((function(){localStorage.setItem("color-mode","light")}),[]),l.a.createElement("div",{className:"app"},l.a.createElement(u.a,null,l.a.createElement(W,null),l.a.createElement(m.a,{path:"/",exact:!0,component:f}),l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/edit",component:P}))))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s,null,l.a.createElement(X,null))),document.getElementById("root"))},50:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.b9b58539.chunk.js.map