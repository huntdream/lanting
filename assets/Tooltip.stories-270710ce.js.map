{"version":3,"file":"Tooltip.stories-270710ce.js","sources":["../../src/components/Tooltip/Tip.tsx","../../src/components/Tooltip/index.tsx","../../src/components/Button/index.tsx"],"sourcesContent":["import React, { ReactNode, useEffect, useRef, useState } from 'react';\nimport './style.scss';\n\nexport type Placement = 'top' | 'right' | 'bottom' | 'left';\n\ninterface Props {\n  title: ReactNode;\n  rect: DOMRect;\n  placement?: Placement;\n  offset?: number;\n}\n\nconst Tip: React.FC<Props> = ({\n  title,\n  rect,\n  placement = 'top',\n  offset = 6,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [position, setPosition] = useState({ left: 0, top: 0, transform: '' });\n\n  useEffect(() => {\n    const oberver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.contentRect) {\n          // calcPosition();\n        }\n      }\n    });\n\n    if (ref.current) {\n      oberver.observe(ref.current);\n    }\n\n    return () => oberver.disconnect();\n  }, []);\n\n  const calcPosition = () => {\n    const { width, left, top, height } = rect;\n\n    const coorX = window.scrollX + left;\n    const coorY = window.scrollY + top;\n\n    let x = coorX;\n    let y = coorY;\n    let transform = '';\n\n    switch (placement) {\n      case 'right':\n        x = coorX + width + offset;\n        y = coorY + height / 2;\n        transform = 'translateY(-50%)';\n        break;\n      case 'bottom':\n        x = coorX + width / 2;\n        y = coorY + height + offset;\n        transform = 'translateX(-50%)';\n\n        break;\n      case 'left':\n        x = coorX - offset;\n        y = coorY + height / 2;\n        transform = 'translate(-100%, -50%)';\n\n        break;\n      default:\n        x = coorX + width / 2;\n        y = coorY - offset;\n        transform = 'translate(-50%, -100%)';\n        break;\n    }\n    setPosition({ left: x, top: y, transform });\n  };\n\n  useEffect(() => {\n    calcPosition();\n  }, []);\n\n  return (\n    <div\n      className='lanting-tooltip-container'\n      ref={ref}\n      style={{\n        ...position,\n      }}\n    >\n      <div className='lanting-tooltip-content' style={{ opacity: 1 }}>\n        {title}\n      </div>\n    </div>\n  );\n};\n\nexport default Tip;\n","import React, {\n  MouseEvent,\n  ReactElement,\n  ReactNode,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport './style.scss';\nimport Tip, { Placement } from './Tip';\n\ninterface Props {\n  title?: ReactNode;\n  timeout?: number;\n  children: ReactElement;\n  placement?: Placement;\n  offset?: number;\n}\n\nconst Tooltip: React.FC<Props> = ({\n  children,\n  title,\n  timeout = 0,\n  placement,\n  offset,\n}) => {\n  const timer = useRef<number>(0);\n  const [visible, setVisible] = useState(false);\n  const [rect, setRect] = useState<DOMRect>();\n\n  useEffect(() => {}, []);\n\n  const handleEnter = (event: MouseEvent) => {\n    if (!visible) {\n      const target = event.currentTarget as HTMLElement;\n\n      setRect(target.getBoundingClientRect());\n\n      if (timeout > 0) {\n        timer.current = window.setTimeout(() => {\n          setVisible(true);\n        }, timeout);\n      } else {\n        setVisible(true);\n      }\n    }\n  };\n\n  const handleLeave = (event: MouseEvent) => {\n    setVisible(false);\n    setRect(undefined);\n\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n  };\n\n  const child = React.cloneElement(children, {\n    onMouseEnter: handleEnter,\n    onMouseLeave: handleLeave,\n    onTouchStart: handleEnter,\n    onTouchEnd: handleLeave,\n  });\n\n  return (\n    <>\n      {child}\n      {visible &&\n        rect &&\n        createPortal(\n          <Tip\n            title={title}\n            rect={rect}\n            placement={placement}\n            offset={offset}\n          />,\n          document.body\n        )}\n    </>\n  );\n};\nexport default Tooltip;\n","import React, { CSSProperties, ButtonHTMLAttributes, forwardRef } from 'react';\nimport cls from 'classnames';\nimport './style.scss';\nimport Icon, { IconNames } from 'components/Icon';\n\ntype ButtonColor = 'primary' | 'secondary';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  active?: boolean;\n  className?: string;\n  style?: CSSProperties;\n  disabled?: boolean;\n  color?: ButtonColor;\n  icon?: IconNames;\n  variant?: 'contained' | 'text';\n  wide?: boolean;\n}\n\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      active,\n      children,\n      className,\n      disabled,\n      icon,\n      style,\n      variant = 'contained',\n      color = 'primary',\n      wide,\n      ...props\n    },\n    ref\n  ) => {\n    const iconOnly = icon && !children;\n\n    return (\n      <button\n        {...props}\n        ref={ref}\n        className={cls(\n          'lanting-button',\n          `lanting-button-${variant}`,\n          `lanting-button-${variant}--${color}`,\n          {\n            'lanting-button--disabled': disabled,\n            'lanting-button-icon': iconOnly,\n            'lanting-button--active': active,\n            'lanting-button--wide': wide,\n          },\n          className\n        )}\n        style={style}\n        disabled={disabled}\n      >\n        {icon && <Icon name={icon} />}\n        {children}\n      </button>\n    );\n  }\n);\n\nexport default Button;\n"],"names":["Tip","title","rect","placement","offset","ref","useRef","position","setPosition","useState","useEffect","oberver","entries","entry","calcPosition","width","left","top","height","coorX","coorY","x","y","transform","jsx","Tooltip","children","timeout","timer","visible","setVisible","setRect","handleEnter","event","target","handleLeave","child","React","jsxs","Fragment","createPortal","Button","forwardRef","active","className","disabled","icon","style","variant","color","wide","props","iconOnly","cls","Icon"],"mappings":"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"}